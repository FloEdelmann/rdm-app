{% extends "base.tmpl" %}

{% block title %}{{ manufacturer }} - {{ description }}{% endblock %}

{% block content %}
    <div id="fb-root"></div>

    <div style="float: right;">
        {% if image_key %}
            <img id="model_image" src="{{ image_key }}=s200"></img>
        {% endif %}
    </div>
    <table id="model_info_table">
        <tr>
            <td>Manufacturer</td>
            <td><a href="/manufacturer/display?manufacturer={{ manufacturer_id }}">{{ manufacturer }}</a></td>
        </tr>
        <tr>
            <td>Name</td>
            <td>{{ description }}</td>
        </tr>
        <tr>
            <td>Model Id</td>
            <td>{{ model_id }} ( 0x{{ model_id|stringformat:"04x" }} )</td>
        </tr>
        {% if product_category %}
            <tr>
                <td>Product Category</td>
                <td><a href="/model/category?category={{ product_category_id }}">{{ product_category }}</a></td>
            </tr>
        {% endif %}
        {% if link %}
            <tr id="model_link_row">
                <td>Link</td>
                <td><a href="{{ link }}">{{ link }}</a></td>
            </tr>
        {% endif %}
        {% if tags %}
            <tr id="model_tags_row">
                <td>Tags</td>
                <td>
                    {% for tag in tags %}
                        <div class="model_tag">{{ tag }}</div>
                    {% endfor %}
                </td>
            </tr>
        {% endif %}
    </table>
    <div style="clear: both; padding: 15px">
        <div style="display: inline-flex!important;" class="fb-like" data-send="false" data-layout="button_count"
             data-width="100" data-show-faces="false"
             data-action="recommend"></div>
        <g:plusone size="medium"></g:plusone>
        <a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal">Tweet</a>
    </div>
    {% if software_versions %}
        <fieldset id="software_fieldset">
            <legend>Software Version:
                <select class="form-control" name="software_select" id="software_select"
                        onChange="app.changeSoftwareVersion(this)">
                    {% for version in software_versions %}
                        <option>{{ version.label }} ({{ version.version_id }})</option>
                    {% endfor %}
                </select>
            </legend>

            <fieldset id="model_personality_fieldset">
                <legend>DMX Personalities</legend>
                <table>
                    <tr>
                        <th>Index</th>
                        <th>Slot Count</th>
                        <th>Description</th>
                    </tr>
                    <tbody id="model_personality_tbody"></tbody>
                </table>
            </fieldset>

            <fieldset id="model_sensor_fieldset">
                <legend>Sensor Information</legend>
                <table>
                    <tr>
                        <th>Sensor Number</th>
                        <th>Description</th>
                        <th>Type</th>
                        <th>Supports Recording</th>
                        <th>Supports Min/Max</th>
                    </tr>
                    <tbody id="model_sensor_tbody"></tbody>
                </table>
            </fieldset>

            <fieldset id="model_params_fieldset">
                <legend>Supported Parameters</legend>
                <ul id="model_params_list"></ul>
            </fieldset>
        </fieldset>
    {% endif %}
{% endblock %}

{% block extra_headers %}
    <script src="/js/app.js"></script>
    <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
    <script type="text/javascript">
        (function () {
            var po = document.createElement('script');
            po.type = 'text/javascript';
            po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(po, s);
        })();
    </script>
    <script>
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <script type="text/javascript">
        app.setSoftwareVersions({{ software_versions_json|safe }});
        app.setLatestVersion(document.getElementById('software_select'));
    </script>
{% endblock %}